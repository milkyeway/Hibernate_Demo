package com.hibernatedemo.action;

import org.hibernate.Session;
import org.hibernate.SessionFactory;

import com.hibernatedemo.model.CompanyBean;
import com.hibernatedemo.model.CompanyDao;
import com.hibernatedemo.util.HibernateUtils;

public class DemoCompanyBeanDaoActionEx1 {


	public static void main(String[] args) {
		SessionFactory factory = HibernateUtils.getSessionFactory();
		Session session = factory.getCurrentSession();
		
		try {
			session.beginTransaction();
			
			CompanyDao dao = new CompanyDao(session);
			
			dao.insert(new CompanyBean(1003,"twitter"));
			
			dao.updateOne(1003, "Block");
			
			CompanyBean com1 = dao.select(1003);
			
			if(com1!=null) {
				System.out.println(com1.getCompanyId()+ " " + com1.getCompanyName());
			}
			
			session.getTransaction().commit();
		}catch(Exception e) {
			System.out.println("Something Wrong and rollback!!");
			session.getTransaction().rollback();
		} finally {
			HibernateUtils.closeSessionFactory();
		}

	}
}
